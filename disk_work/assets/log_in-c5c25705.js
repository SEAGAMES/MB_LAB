import{_ as a,a as e,o as s,c as l}from"./index-96fd3d37.js";const n={data(){return{text:"Login system  กำลังนำไปหน้า ล็อกอิน"}},async mounted(){this.$route.query.vfy==="pass"&&this.$route.query.c!==null?(console.log("เข้ามา1"),this.login()):localStorage.getItem("MB-app")?(console.log("เข้ามา2"),e.post("http://localhost:9200/login/checktoken").then(o=>{o.data.msg==="token-ok"?(console.log("ผ่าน msg === token-ok"),this.$router.push({path:"../views/HomeView.vue"})):(localStorage.removeItem("MB-app"),window.location="https://mb.mahidol.ac.th/mbenter/login?src=mb_lab")})):(console.log("เข้ามา3"),setTimeout(function(){window.location="https://mb.mahidol.ac.th/mbenter/login?src=mb_lab"},500))},methods:{async login(){await e.post("https://mb.mahidol.ac.th/mbpsapi/login",{c:this.$route.query.c}).then(o=>{const t=o.data;t.msg==="ok"?(localStorage.removeItem("MB-app"),localStorage.setItem("MB-app",t.token),e.defaults.headers.common.Authorization=localStorage.getItem("MB-app"),console.log("เข้า ok"),this.$router.push({name:"HomeView"})):(console.log("ไม่พบรายชื่อ"),this.text="โปรดติดต่อคุณ สุจิต ฝ่าย ITMB",alert("ไม่พบรายชื่อคุณในฐานข้อมูล"))})}}};function c(o,t,i,r,m,p){return s(),l("div")}const g=a(n,[["render",c]]);export{g as default};
