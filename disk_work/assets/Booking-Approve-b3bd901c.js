import{_ as B,aG as F,I as y,E as C,ax as S,ay as D,az as k,o as s,c as n,aA as u,aB as o,d as c,aD as d,Y as L,aE as r,aC as T,aw as p,aF as I}from"./index-56921e69.js";import{C as v,D as $,E as V,V as A}from"./VSnackbar-94aabf0f.js";const R={components:{"a-select":F},data:()=>({loadingBtn:!1,snackBar:{showSnackBar:!1,titleSnackBar:"",colorSnackBar:"",iconSnackBar:""},changeStatus:!1,dataDetail:[],dataID:[],columns:[{key:"name",title:"ชื่อ-นามสกุล",dataIndex:"name",align:"center"},{key:"phone",title:"เบอร์",dataIndex:"phone",align:"center"},{key:"where_lab",title:"ห้อง",dataIndex:"where_lab",align:"center"},{key:"timebook",title:"เวลาที่กดจอง",dataIndex:"timebook",align:"center"},{key:"start_date",title:"เริ่มใช้เวลา",dataIndex:"start_date",align:"center"},{key:"end_date",title:"ถึง",dataIndex:"end_date",align:"center"},{key:"appove_status",title:"สถานะ",dataIndex:"appove_status",align:"center"}]}),setup(){const e=y([]),a=y([{label:"รออนุมัติ",value:0},{label:"อนุมัติ",value:1},{label:"ไม่อนุมัติ",value:2}]);return C(()=>{}),{dataLoad:e,options:a}},mounted(){this.$store.getters.userData==null||this.$store.getters.userData==""||this.$store.getters.userData==null?this.$router.push({name:"Login"}):this.getRoomLab()},methods:{alertShow(e,a,l,g){this.snackBar={showSnackBar:e,titleSnackBar:a,colorSnackBar:l,iconSnackBar:g}},formatdate(e){const a=e,l=new Date(a),m=["(Sun.)","(Mon.)","(Tue.)","(Wed.)","(Thu.)","(Fri.)","(Sat.)"][l.getDay()],h=l.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!0});return`${m} ${l.getDate()}/${l.getMonth()+1}/${l.getFullYear()} (${h})`},getStatusButtonStyle(e){switch(e){case 0:return{backgroundColor:"orange"};case 1:return{backgroundColor:"lightgreen"};case 2:return{backgroundColor:"lightcoral"};default:return{}}},getStatusLabel(e){switch(e){case 0:return this.languageForShow.status.wait;case 1:return this.languageForShow.status.allow;case 2:return this.languageForShow.status.not_Allowed;default:return""}},async getRoomLab(){const e=await v.getBookingLab();e.forEach(a=>{a.start_date=this.formatdate(a.start_date),a.end_date=this.formatdate(a.end_date),a.timebook=this.formatdate(a.timebook)}),this.dataLoad=e},selectRow(e){this.changeStatus=!0,this.dataID=e.id},async updateApproveStatus(){this.changeStatus=!1;const e=await v.updateApproveStatus(this.dataID,this.value);setTimeout(async()=>{e.data.msg==="ok"?(S.success("save data is success"),this.getRoomLab()):S.error("error can not to save")},1500)}},computed:{...D(["formLanguge"]),languageForShowComputed(){return this.formLanguge||this.languageForShow}},watch:{languageForShowComputed:{handler(e){this.languageForShow=e},immediate:!0}}},E={class:"fontSarabun container text-center"},N={class:"text-bold mt-3 text-indigo-darken-4"},M={class:"table-responsive"},U={key:0},z={key:1},G={key:2},O={key:3},Y={key:4},P={key:5},W={key:6},q={key:0,style:{color:"#3F51B5"}},H={key:1,style:{color:"#00BFA5"}},J={key:2,style:{color:"#F57C00"}},K={key:3,style:{color:"#F57C00"}},Q={class:"p-2 text-left"},X={class:"text-center"};function Z(e,a,l,g,m,h){const _=k("a-button"),b=k("a-table"),w=k("a-select"),f=k("a-modal");return s(),n(L,null,[u("div",E,[u("div",null,[u("h1",N,o(e.languageForShow.nameApprove),1)]),c($,null,{default:d(()=>[u("div",M,[c(b,{columns:e.columns,"data-source":g.dataLoad},{headerCell:d(({column:t})=>[t.key==="name"?(s(),n("span",U,o(e.languageForShow.headerTable.name),1)):r("",!0),t.key==="phone"?(s(),n("span",z,o(e.languageForShow.headerTable.tel),1)):r("",!0),t.key==="where_lab"?(s(),n("span",G,o(e.languageForShow.headerTable.room),1)):r("",!0),t.key==="timebook"?(s(),n("span",O,o(e.languageForShow.headerTable.sentTime),1)):r("",!0),t.key==="start_date"?(s(),n("span",Y,o(e.languageForShow.headerTable.startTime),1)):r("",!0),t.key==="end_date"?(s(),n("span",P,o(e.languageForShow.headerTable.endTime),1)):r("",!0),t.key==="appove_status"?(s(),n("span",W,o(e.languageForShow.headerTable.status),1)):r("",!0)]),bodyCell:d(({column:t,record:i})=>[t.key==="name"?(s(),n("div",q,o(i.name),1)):r("",!0),t.key==="where_lab"?(s(),n("div",H,o(i.where_lab),1)):r("",!0),t.key==="start_date"?(s(),n("div",J,o(i.start_date),1)):r("",!0),t.key==="end_date"?(s(),n("div",K,o(i.end_date),1)):r("",!0),t.key==="appove_status"?(s(),T(_,{key:4,class:"custom-button",onClick:x=>h.selectRow(i),style:I(h.getStatusButtonStyle(i.appove_status))},{default:d(()=>[p(o(h.getStatusLabel(i.appove_status)),1)]),_:2},1032,["onClick","style"])):r("",!0)]),_:1},8,["columns","data-source"])])]),_:1}),u("div",Q,[c(_,{style:{"background-color":"lightcoral"},onClick:a[0]||(a[0]=t=>e.$router.push({name:"Mb_Lab"}))},{default:d(()=>[p(o(this.languageForShow.btn.backPage),1)]),_:1})])]),u("div",null,[c(f,{open:e.changeStatus,"onUpdate:open":a[2]||(a[2]=t=>e.changeStatus=t),title:"เปลี่ยนสถานะ",onCancel:a[3]||(a[3]=t=>e.changeStatus===!1),onOk:a[4]||(a[4]=t=>h.updateApproveStatus())},{default:d(()=>[c(w,{value:e.value,"onUpdate:value":a[1]||(a[1]=t=>e.value=t),style:{width:"100%"},options:g.options},null,8,["value","options"])]),_:1},8,["open"])]),c(V,{modelValue:e.snackBar.showSnackBar,"onUpdate:modelValue":a[5]||(a[5]=t=>e.snackBar.showSnackBar=t),timeout:3e3,top:""},{default:d(()=>[u("div",X,[p(o(e.snackBar.titleSnackBar)+" ",1),c(A,{large:"",class:"ml-1",color:e.snackBar.colorSnackBar},{default:d(()=>[p(o(e.snackBar.iconSnackBar),1)]),_:1},8,["color"])])]),_:1},8,["modelValue"])],64)}const ae=B(R,[["render",Z],["__scopeId","data-v-6852faa4"]]);export{ae as default};
